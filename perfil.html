<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil do Usuário</title>
    <style>
        /* body {
            font-family: Arial, sans-serif;
            background-color: #e0f7fa;
            margin: 0;
            padding: 0;
        }

        .profile-container {
            max-width: 800px;
            margin: 40px auto;
            background-color: #ffffff;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
            border-radius: 20px;
            overflow: hidden;
        }

        .profile-header {
            background: linear-gradient(135deg, #1e88e5, #42a5f5);
            color: white;
            padding: 30px 20px;
            text-align: center;
        }

        .profile-header h1 {
            margin: 0;
            font-size: 2.5em;
        }

        .profile-content {
            padding: 30px;
        }

        .profile-picture {
            float: right;
            width: 250px;
            height: 250px;
            border-radius: 50%;
            margin-right: 30px;
            border: 5px solid #1e88e5;
        }

        .profileInfo {
            overflow: hidden;
        }

        .profileInfo label {
            display: block;
            margin-top: 10px;
            font-weight: bold;
            color: #1e88e5;
        }

        .profileInfo h4 {
            margin: 5px 0;
            color: #555;
            font-size: 1.1em;
        }

        .edit-form {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background-color: #f5f5f5;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .edit-form label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .edit-form input {
            width: calc(100% - 20px);
            padding: 8px;
            margin-bottom: 10px;
            border-radius: 4px;
            border: 1px solid #ccc;
        }

        .edit-form button {
            background-color: #1e88e5;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
        }

        .edit-form button:hover {
            background-color: #0d47a1;
        }

        button {
            background-color: rgb(255, 255, 255);
            border-style: solid;
            font-weight: bold;
            border-color: rgb(0, 0, 0);
            border-radius: 6px;
            padding: 5px;
            margin-top: 10px;
        }

        .voltar {
            background-color: #080707;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
        }

        .voltar:hover {
            background-color: #464343;
        } */

        body {
            font-family: Arial, sans-serif;
            background-color: #030303;
            margin: 0;
            padding: 0;
            /* filter: sepia(80%); */
            justify-content: center;
            align-items: center;
            /* background-image: url('background1.jpg'); */
            
            
        }

        input { 
            
            border: 1px solid #000000;
            border-radius: 4px;
            color: gray;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.266);
        }

        input:hover {
    
            box-shadow: 0 0 1em rgb(255, 255, 255);
        }


        .profile-container {
            max-width: 800px;
            margin: 40px auto;
            background-color: #0c0c0c;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
            border-radius: 20px;
            overflow: hidden;
            filter: sepia(40%);
        }

        .profile-header {
            background: linear-gradient(135deg, #000000, #e6e6e6);
            color: rgb(0, 0, 0);
            padding: 30px 20px;
            text-align: center;
        }

        .profile-header h1 {
            margin: 0;
            font-size: 2.5em;
        }

        .profile-content {
            padding: 30px;
        }

      
        .profileInfo {
            overflow: hidden;
        }

        .profileInfo label {
            display: block;
            margin-top: 10px;
            font-weight: bold;
            color: #c2c2c2;
        }

        .profileInfo h4 {
            margin: 5px 0;
            color: #555;
            font-size: 1.1em;
        }

        .edit-form {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background-color: #000000;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            filter: none;
            color: #000000;
        }

        .edit-form label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .edit-form input {
            width: calc(100% - 20px);
            padding: 8px;
            margin-bottom: 10px;
            border-radius: 4px;
            border: 1px solid #ccc;
        }

        .edit-form button {
            background-color: #080707;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
        }

        .edit-form button:hover {
            background-color: #464343;
            color: black;
            border-color: black;
            
        }

        button {
            background-color: #080707;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 10px;
          
        }

        .editarBotao {
            background-color: #080707;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
        }


        button:hover {
        background-color: #464343;
        color: black;
        border-color: black;
        }

        .voltar {
            background-color: #080707;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
        }

        .voltar:hover{
            background-color: #464343;
        }





    </style>
    <script async src="script.js"></script>
</head>

<body onload="carrega()">
    <div class="profile-container">
        <div class="profile-header">
            <h1 id="nomeLogado"></h1>
        </div>
        <div class="profile-content">
            <!-- <img src="profile-picture.jpg" alt="Foto do Usuário" class="profile-picture"> -->
            <div class="profileInfo">
                <label for="idadeLogado"><b>Data de Nascimento</b></label>
                <h4 id="idadeLogado"></h4>

                <label for="cpfLogado"><b>CPF:</b></label>
                <h4 id="cpfLogado"></h4>

                <label for="generoLogado">Genêro:</label>
                <h4 id="generoLogado"></h4>

                <label for="emailLogado">E-mail:</label>
                <h4 id="emailLogado"></h4>

                <label for="contatoLogado">Celular:</label>
                <h4 id="contatoLogado"></h4>

                <label for="enderecoLogado">CEP:</label>
                <h4 id="enderecoLogado"></h4>

                <button class="voltar" onclick="voltar()">Voltar</button>
                <button class="editarBotao" onclick="editarButton()">Editar Perfil</button>

                <div class="edit-form" id="editForm">
                    <label for="editNome">Nome:</label>
                    <input type="text" id="editNome">
                    <label for="editIdade">Data de Nascimento:</label>
                    <input type="text" id="editIdade">
                    <label for="editCpf">CPF:</label>
                    <input type="number" disabled id="editCpf">
                    <label for="editGenero">Genêro:</label>
                    <input type="text" id="editGenero">
                    <label for="editEmail">E-mail:</label>
                    <input type="text" id="editEmail">
                    <label for="editContato">Celular:</label>
                    <input type="number" id="editContato">
                    <label for="editEndereco">CEP:</label>
                    <input type="text" id="editEndereco">
                    <button onclick="salvarAlteracoes(event)">Salvar</button>
                    <button onclick="editarButton()">Cancelar</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        function editarButton() {
            const form = document.getElementById('editForm');
            if (form.style.display === 'none' || form.style.display === '') {
                form.style.display = 'block';

                // Preencher o formulário com os dados atuais
                document.getElementById('editNome').value = document.getElementById('nomeLogado').innerText;
                document.getElementById('editIdade').value = document.getElementById('idadeLogado').innerText;
                document.getElementById('editCpf').value = document.getElementById('cpfLogado').innerText;
                document.getElementById('editGenero').value = document.getElementById('generoLogado').innerText;
                document.getElementById('editEmail').value = document.getElementById('emailLogado').innerText;
                document.getElementById('editContato').value = document.getElementById('contatoLogado').innerText;
                document.getElementById('editEndereco').value = document.getElementById('enderecoLogado').innerText;
            } else {
                form.style.display = 'none';
            }
        }

        function salvarAlteracoes(event) {
            let confirmar = confirm('Deseja realmente editar seu perfil? ')
            event.preventDefault();
            // Atualizar a lista de usuários no localStorage
            let usuarios = JSON.parse(localStorage.getItem('usuarios')) || [];
            // const index = usuarios.findIndex(user => {user.cpfNovo === updatedUser.cpfNovo});
            let index = -1;
            let cpfPesquisado = document.getElementById('editCpf').value
            if(confirmar){

                for (i = 0; i < usuarios.length; i++) {
                    console.log(usuarios[i].cpfNovo)
                    console.log(cpfPesquisado);
                    if (usuarios[i].cpfNovo === cpfPesquisado) {
                        index = i;
                    }
                }
                
                if (index !== -1) {
                    usuarios[index].nome = document.getElementById('editNome').value,
                    usuarios[index].idade = document.getElementById('editIdade').value,
                    usuarios[index].genero = document.getElementById('editGenero').value,
                    usuarios[index].email = document.getElementById('editEmail').value,
                    usuarios[index].celular = document.getElementById('editContato').value,
                    usuarios[index].endereco = document.getElementById('editEndereco').value
                document.getElementById('nomeLogado').innerText = usuarios[index].nome;
                document.getElementById('idadeLogado').innerText = usuarios[index].idade;
                document.getElementById('generoLogado').innerText = usuarios[index].genero;
                document.getElementById('emailLogado').innerText = usuarios[index].email;
                document.getElementById('contatoLogado').innerText = usuarios[index].celular;
                document.getElementById('enderecoLogado').innerText = usuarios[index].endereco;

                // Salvar as alterações no localStorage
                localStorage.setItem("logado", JSON.stringify(usuarios[index]));
                
                console.log('INDEX: ', index);
                console.log(usuarios);
                
                localStorage.setItem('usuarios', JSON.stringify(usuarios));
                
            } else {
                // usuarios.push(usuarios); // Adiciona novo usuário se não encontrado (precaução)
                alert('Não foi possivel salvar as alterações!')
            }
        }
            

            // Ocultar o formulário de edição
            editarButton();
        }
    </script>

</body>

</html>